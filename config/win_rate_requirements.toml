# Win Rate Requirements Configuration
# CRITICAL: This system ONLY executes trades with 90%+ win probability

[core_requirements]
# Absolute minimum win probability to execute any trade
minimum_win_probability = 0.90  # 90% HARD REQUIREMENT

# Target win rate for optimization
target_win_rate = 0.92  # 92% target

# Maximum acceptable loss rate
max_loss_rate = 0.10  # 10% maximum

[confidence_thresholds]
# Julia analysis minimum confidence
julia_min_confidence = 0.90

# Liquidity prediction minimum score
liquidity_min_score = 0.85

# Edge calculation minimum
min_edge_requirement = 0.15  # 15% minimum edge

# Risk-adjusted confidence
risk_adjusted_min = 0.88

[strike_filtering]
# Percentage of strikes that meet 90% criteria (expected)
expected_qualifying_rate = 0.30  # 30% of opportunities qualify

# Maximum strikes to evaluate before finding a 90% opportunity
max_evaluation_attempts = 10

# Cooldown after rejected strike (ms)
rejection_cooldown_ms = 100

[position_sizing]
# Kelly Criterion factor for 90% win rate
kelly_factor = 0.25  # Conservative quarter Kelly

# Maximum position size (% of capital)
max_position_size = 0.05  # 5% max

# Position size boost for 95%+ confidence
high_confidence_boost = 1.5

[risk_management]
# Stop loss tightness for 90% trades
stop_loss_pct = 0.02  # 2% stop loss

# Take profit targets
base_take_profit = 0.06  # 6% base target
high_confidence_tp = 0.08  # 8% for 95%+ confidence

# Maximum consecutive losses before halt
max_consecutive_losses = 3  # Very rare with 90% win rate

# Risk of ruin threshold
max_risk_of_ruin = 0.001  # 0.1% risk of ruin

[performance_monitoring]
# Minimum acceptable actual win rate
min_actual_win_rate = 0.85  # Alert if drops below 85%

# Sample size for win rate calculation
min_sample_size = 100

# Win rate measurement window (hours)
measurement_window = 24

[market_conditions]
# Only trade during optimal conditions
required_conditions = [
    "high_liquidity",
    "normal_volatility",
    "positive_momentum",
    "stable_spread"
]

# Blocked trading hours (UTC)
blocked_hours = [0, 1, 2, 3, 4, 5]  # Low liquidity hours

# Minimum market quality score
min_market_quality = 0.80

[validation_layers]
# All must pass for 90% confidence
required_validators = [
    "confidence_validator",      # Raw confidence >= 90%
    "edge_validator",           # Expected value >= 15%
    "liquidity_validator",      # Liquidity score >= 85%
    "volatility_validator",     # Volatility within range
    "correlation_validator",    # Low correlation risk
    "time_validator",          # Optimal trading hours
    "drawdown_validator",      # Acceptable drawdown risk
    "momentum_validator"       # Favorable momentum
]

# Validator weights for composite score
[validator_weights]
confidence = 0.25
edge = 0.20
liquidity = 0.20
volatility = 0.10
correlation = 0.10
time = 0.05
drawdown = 0.05
momentum = 0.05

[capital_allocation]
# Capital allocation for 90% win rate
base_capital = 1_000_000.0
reserved_capital = 200_000.0  # 20% reserve

# Progressive betting with 90% win rate
enable_progressive = true
progression_factor = 1.1  # 10% increase after wins

# Capital injection from wins
reinvestment_rate = 0.80  # Reinvest 80% of profits

[alerts]
# Alert if win rate drops
win_rate_warning = 0.88  # Warn at 88%
win_rate_critical = 0.85  # Critical at 85%

# Alert on consecutive losses
consecutive_loss_alert = 2  # Alert after 2 losses (rare)

# Daily loss limit with 90% win rate
daily_loss_limit = 0.02  # 2% daily loss limit (very conservative)
